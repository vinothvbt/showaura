<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - ShowAura</title>
    <link rel="icon" type="image/png" href="purpleshowaura.png"> <!-- Favicon added here -->
    <link rel="stylesheet" href="styles-modern.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="logo">
            <span class="logo-show">Show</span><span class="logo-aura">Aura</span>
        </div>
        <div class="header-actions">
            <a href="profie.html" class="cta-button"><i class="fas fa-user"></i>  your profile</a>
            <a href="login.html" class="about-us-button">Login</a>
        </div>
    </header>
    <main>
        <section class="hero-section">
            <div class="hero-content">
                <p class="hero-text" >Discover, showcase</p>
                <p class="hero-small"> show your talent around the world</p>
            </div>
            <div class="hero-nav">
                <a href="talentshow.html" class="getstarted">Get Started</a>
                <a href="about.html" class="upload-button">About us</a>
            </div>
        </section>
        <section class="leaderboard-preview" id="skill">
            <h2 class="section-title">Skillet of the day</h2>
            <div class="leaderboard-container" id="leaderboardContainer">
                <!-- Leaderboard entries will be loaded here -->
            </div>
        </section>
    </main>
    <footer>
        <nav class="bottom-nav">
            <ul class="nav-links">
                <li><a href="index.html"><i class="fas fa-home"></i></a></li>
                <li><a href="upload.html"><i class="fas fa-upload"></i></a></li>
                <li><a href="leaderboard.html"><i class="fas fa-trophy"></i></a></li>
                <li><a href="talentshow.html"><i class="fas fa-play-circle"></i></a></li>
            </ul>
        </nav>
    </footer>
    <script>
        // Load leaderboard data on page load
        window.addEventListener('load', async () => {
            try {
                const response = await fetch('/api/leaderboard?limit=4');
                const data = await response.json();
                
                if (response.ok) {
                    displayLeaderboard(data.leaderboard);
                }
            } catch (error) {
                console.error('Error loading leaderboard:', error);
                // Fallback to static content if API fails
            }

            // Update navigation based on login status
            updateNavigation();
        });

        function displayLeaderboard(users) {
            const container = document.getElementById('leaderboardContainer');
            container.innerHTML = '';

            const defaultImages = ['bio2.jpeg', 'himawari.jpeg', 'bino1.jpeg', 'bino.jpeg'];
            
            users.forEach((user, index) => {
                const entry = document.createElement('div');
                entry.className = 'leaderboard-entry';
                
                const profileImage = user.profile_image || defaultImages[index] || 'purpleshowaura.png';
                
                entry.innerHTML = `
                    <img src="${profileImage}" alt="Profile Image" class="profile-image">
                    <div class="entry-details">
                        <h3>${user.username}</h3>
                        <p>${user.bio || 'ShowAura User'}</p>
                        <p><span>${user.aura_points}</span> Aura</p>
                    </div>
                `;
                
                container.appendChild(entry);
            });
        }

        function updateNavigation() {
            const token = localStorage.getItem('token');
            const user = JSON.parse(localStorage.getItem('user') || '{}');
            
            const profileLink = document.querySelector('a[href="profie.html"]');
            const loginLink = document.querySelector('a[href="login.html"]');
            
            if (token && user.username) {
                profileLink.innerHTML = `<i class="fas fa-user"></i> ${user.username}`;
                loginLink.innerHTML = 'Logout';
                loginLink.href = '#';
                loginLink.onclick = () => {
                    localStorage.removeItem('token');
                    localStorage.removeItem('user');
                    window.location.reload();
                };
            }
        }
    </script>
</body>
</html>
